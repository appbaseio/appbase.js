// Appbase Javascript Library v3.0.0
!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){var r=t("./src/validators"),i=new(t("./src/decorator"))(r),o=t("./src/HTTP"),s=t("./src/App"),a=t("./src/Collection"),u=i.decorateAll(t("./src/OAuthService")),c=t("./src/OAuth/auth"),l=t("./src/OAuth/oauthio"),f=t("./src/uuid"),p=t("./src/URL"),h=t("hashmap"),d="undefined"!=typeof window&&window.XMLHttpRequest?window:t("xhr2"),v=t("atomic-http")(d),y=t("bluebird"),g=i.decorateAll(t("./src/Appbase"));Appbase=new g(i.decorateAll(a),o,i.decorateAll(s),p,h,y,v,u.bind(null,l),c.bind(null,l,v),f),e.exports=Appbase},{"./src/App":8,"./src/Appbase":9,"./src/Collection":10,"./src/HTTP":12,"./src/OAuth/auth":13,"./src/OAuth/oauthio":14,"./src/OAuthService":15,"./src/URL":16,"./src/decorator":18,"./src/uuid":19,"./src/validators":20,"atomic-http":2,bluebird:3,hashmap:5,xhr2:7}],2:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?e.exports=r:t.atomic=new r(t)}(this,function(t){function e(t,e){return e===c?t&&typeof t===e&&!(t instanceof Date):t&&typeof t===e}function n(t){try{return[JSON.parse(t.responseText),t]}catch(e){return[t.responseText,t]}}function r(r,i,s,a){function p(t){return function(n){return e(n,f)&&k[t].push(n),w}}function h(t){return function(){for(var e=k[t],n=0;n<e.length;n++)e[n].apply(this,arguments)}}function d(){var t=m.responseText,e=t.substr(x);return x=t.length,e}function v(){return m._responseParts[x++].toString()}r=e(r,l)?r.toUpperCase():"GET",i=e(i,l)?i:"",e(s,c)&&(s=JSON.stringify(s)),s=e(s,l)?s:"",a=!e(a,c)||a instanceof Array?{}:a;var y,g,_=t.XMLHttpRequest||ActiveXObject,m=new _("MSXML2.XMLHTTP.3.0"),b=a.headers||{},j={},w={},k={},x=0;for(y=0;3>y;y++){var E=o[y];k[E]=[],j[E]=h(E),w[E]=p(E)}w.then=function(){for(y=0;3>y&&arguments[y];y++)e(arguments[y],f)&&k[o[y]].push(arguments[y]);return w},w["catch"]=w.error,m.open(r,i,!0);for(g in u)!b.hasOwnProperty(g)&&u.hasOwnProperty(g)&&m.setRequestHeader(g,u[g]);for(g in b)b.hasOwnProperty(g)&&m.setRequestHeader(g,b[g]);return m.onreadystatechange=function(){if(4===m.readyState)try{var t=m.status.toString()[0];j["2"===t?"success":"error"].apply(this,n(m))}catch(e){}},m.onprogress=function(){var t=m._responseParts?v():d();t&&j.notify.apply(this,[t,m])},a.beforeSend&&a.beforeSend(m),m.send(s),w}function i(t){return function(n,i,o){return e(n,c)&&(o=n,i=n.data,n=n.url),new r(t,n,i,o)}}for(var o=["success","error","notify"],s=["get","put","post","patch","delete"],a=s.length,u={"Content-Type":"application/json"},c="object",l="string",f="function",p=function(t){return i(t.method)(t)},h=0;a>h;h++){var d=s[h];p[d]=i(d)}return p.del=p["delete"],p})},{}],3:[function(t,e,n){(function(t,r){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof r?i=r:"undefined"!=typeof self&&(i=self),i.Promise=t()}}(function(){var e,n,i;return function o(t,e,n){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(e,n,r){"use strict";function i(){this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function o(t,e,n){var r=this._getDomain();void 0!==r&&(t=r.bind(t)),this._lateQueue.push(t,e,n),this._queueTick()}function s(t,e,n){var r=this._getDomain();void 0!==r&&(t=r.bind(t)),this._normalQueue.push(t,e,n),this._queueTick()}function a(t){var e=this._getDomain();if(void 0!==e){var n=e.bind(t._settlePromises);this._normalQueue.push(n,t,void 0)}else this._normalQueue._pushOne(t);this._queueTick()}var u;try{throw new Error}catch(c){u=c}var l=e("./schedule.js"),f=e("./queue.js"),p=e("./util.js");if(i.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},i.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},i.prototype.throwLater=function(t,e){1===arguments.length&&(e=t,t=function(){throw e});var n=this._getDomain();if(void 0!==n&&(t=n.bind(t)),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(r){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},i.prototype._getDomain=function(){},p.isNode){var h=e("events"),d=function(){var e=t.domain;return null===e?void 0:e};if(h.usingDomains)i.prototype._getDomain=d;else{var v=Object.getOwnPropertyDescriptor(h,"usingDomains");if(v.configurable){var y=!1;Object.defineProperty(h,"usingDomains",{configurable:!1,enumerable:!0,get:function(){return y},set:function(e){!y&&e&&(y=!0,i.prototype._getDomain=d,p.toFastProperties(t),t.emit("domainsActivated"))}})}else t.on("domainsActivated",function(){i.prototype._getDomain=d})}}p.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):setTimeout(function(){t.call(e,n)},100)},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?s.call(this,t,e,n):setTimeout(function(){t.call(e,n)},0)},i.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):setTimeout(function(){t._settlePromises()},0)}):(i.prototype.invokeLater=o,i.prototype.invoke=s,i.prototype.settlePromises=a),i.prototype.invokeFirst=function(t,e,n){var r=this._getDomain();void 0!==r&&(t=r.bind(t)),this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=new i,n.exports.firstLineError=u},{"./queue.js":28,"./schedule.js":31,"./util.js":38,events:39}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},o=function(t,e){this._setBoundTo(t),this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._setBoundTo(r),u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(r,i){var o=n(r),s=new t(e);return o instanceof t?o._then(function(t){s._setBoundTo(t),s._resolveCallback(i)},s._reject,s._progress,s,null):(s._setBoundTo(r),s._resolveCallback(i)),s}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=r,e.exports=o},{"./promise.js":23}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}{var s,a=t("./util.js"),u=a.canEvaluate;a.isIdentifier}e.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;e>i;++i)n[i-1]=arguments[i];return n.push(t),this._then(r,void 0,void 0,n,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./errors.js"),r=t("./async.js"),i=n.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),r.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(r.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},{"./async.js":2,"./errors.js":13}],7:[function(e,n,r){"use strict";n.exports=function(){function n(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);j(this,n),e>32&&this.uncycle()}function r(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function s(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=v.test(r)||"    (No stack trace)"===r,o=i&&_(r);i&&!o&&(g&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&(e=e.slice(n)),e}function u(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+c(e)+">, no stack trace)"}function c(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function l(t){var e=t.match(m);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var f,p=e("./async.js"),h=e("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,v=null,y=null,g=!1;h.inherits(n,Error),n.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>a?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},n.prototype.parent=function(){return this._parent},n.prototype.hasParent=function(){return void 0!==this._parent},n.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=n.parseStackAndMessage(t),a=e.message,u=[e.stack],c=this;void 0!==c;)u.push(s(c.stack.split("\n"))),c=c._parent;o(u),i(u),h.notEnumerableProp(t,"stack",r(a,u)),h.notEnumerableProp(t,"__stackCleaned__",!0)}},n.parseStackAndMessage=function(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:n,stack:s(e)}},n.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var r=t.stack;n=e+y(r,t)}else n=e+String(t);"function"==typeof f?f(n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}},n.unhandledRejection=function(t){n.formatAndLogError(t,"^--- With additional stack trace: ")},n.isSupported=function(){return"function"==typeof j},n.fireRejectionEvent=function(t,e,r,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(r,i))}catch(s){p.throwLater(s)}var a=!1;try{a=w(t,r,i)}catch(s){a=!0,p.throwLater(s)}var u=!1;if(b)try{u=b(t.toLowerCase(),{reason:r,promise:i})}catch(s){u=!0,p.throwLater(s)}a||o||u||"unhandledRejection"!==t||n.formatAndLogError(r,"Unhandled rejection ")};var _=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;n.setBounds=function(t,e){if(n.isSupported()){for(var r,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,u=-1,c=0;c<o.length;++c){var f=l(o[c]);if(f){r=f.fileName,a=f.line;break}}for(var c=0;c<s.length;++c){var f=l(s[c]);if(f){i=f.fileName,u=f.line;break}}0>a||0>u||!r||!i||r!==i||a>=u||(_=function(t){if(d.test(t))return!0;var e=l(t);return e&&e.fileName===r&&a<=e.line&&e.line<=u?!0:!1})}};var b,j=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():u(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,v=t,y=e;var n=Error.captureStackTrace;return _=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=e,g=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i?(y=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?u(e):e.toString()},null):(v=t,y=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),w=function(){if(h.isNode)return function(e,n,r){return"rejectionHandled"===e?t.emit(e,r):t.emit(e,n,r)};var e=!1,n=!0;try{var r=new self.CustomEvent("test");e=r instanceof CustomEvent}catch(i){}if(!e)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){n=!1}n&&(b=function(t,n){var r;return e?r=new self.CustomEvent(t,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!1,!0,n)),r?!self.dispatchEvent(r):!1});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=s[t],i=self[r];return i?("rejectionHandled"===t?i.call(self,n):i.call(self,e,n),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(f=function(t){console.warn(t)},h.isNode&&t.stderr.isTTY?f=function(e){t.stderr.write("[31m"+e+"[39m\n")}:h.isNode||"string"!=typeof(new Error).stack||(f=function(t){console.warn("%c"+t,"color: red")})),n}},{"./async.js":2,"./util.js":38}],8:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}function r(t,e){var n={},r=s(t).call(n,e);if(r===a)return r;var i=u(n);return i.length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):r}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return n.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,o=i._boundTo,u=0,c=this._instances.length;c>u;++u){var l=this._instances[u],f=l===Error||null!=l&&l.prototype instanceof Error;if(f&&t instanceof l){var p=s(n).call(o,t);return p===a?(e.e=p.e,e):p}if("function"==typeof l&&!f){var h=r(l,t);if(h===a){t=a.e;break}if(h){var p=s(n).call(o,t);return p===a?(e.e=p.e,e):p}}}return e.e=t,e},n}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,n){"use strict";e.exports=function(t,e,n){function r(){this._trace=new e(o())}function i(){return n()?new r:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return r.prototype._pushContext=function(){n()&&void 0!==this._trace&&s.push(this._trace)},r.prototype._popContext=function(){n()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,i}},{}],10:[function(e,n,r){"use strict";n.exports=function(n,r){var i,o,s=e("./async.js"),a=e("./errors.js").Warning,u=e("./util.js"),c=u.canAttachTrace,l=!1||u.isNode&&(!!t.env.BLUEBIRD_DEBUG||"development"===t.env.NODE_ENV);return l&&s.disableTrampolineIfNecessary(),n.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0)},n.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",i,void 0,this)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},n.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},n.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},n.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},n.prototype._captureStackTrace=function(){return l&&(this._trace=new r(this._peekContext())),this},n.prototype._attachExtraTrace=function(t,e){if(l&&c(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=r.parseStackAndMessage(t);u.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}},n.prototype._warn=function(t){var e=new a(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var i=r.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}r.formatAndLogError(e,"")},n.onPossiblyUnhandledRejection=function(t){o="function"==typeof t?t:void 0},n.onUnhandledRejectionHandled=function(t){i="function"==typeof t?t:void 0},n.longStackTraces=function(){if(s.haveItemsQueued()&&l===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");l=r.isSupported(),l&&s.disableTrampolineIfNecessary()},n.hasLongStackTraces=function(){return l&&r.isSupported()},r.isSupported()||(n.longStackTraces=function(){},l=!1),function(){return l}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,n){"use strict";var r=t("./util.js"),i=r.isPrimitive,o=r.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},n=function(){throw this},r=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return o&&i(t)?this._then(r(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return o&&i(t)?this._then(r(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}}},{}],13:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js"),u=a.freeze,c=t("./util.js"),l=c.inherits,f=c.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(y){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<g.length;++_)"function"==typeof Array.prototype[g[_]]&&(v.prototype[g[_]]=Array.prototype[g[_]]);a.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),f(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},p=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:p,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var r;return r=p&&h(e)?n?s(e):a(e):n?i:o,t._then(r,d,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=r(s,i);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(n.e=t,n):t}function l(t){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundTo,t):i(t);if(void 0!==o){var s=r(o,n);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var f=t("./util.js"),p=f.wrapsPrimitiveReceiver,h=f.isPrimitive,d=f.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function s(t,n,i,o){var s=this._promise=new e(r);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p}var a=t("./errors.js"),u=a.TypeError,c=t("./util.js"),l=c.errorObj,f=c.tryCatch,p=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===l)return this._promise._rejectCallback(t.e,!1,!0);var n=t.value;if(t.done===!0)this._promise._resolveCallback(n);else{var r=i(n,this._promise);if(!(r instanceof e)&&(r=o(r,this._yieldHandlers,this._promise),null===r))return void this._throw(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");p.push(t)},e.spawn=function(t){if("function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new s(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){{var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj}e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var r=new n(o).promise();return void 0!==t?r.spread(t):r}}},{"./util.js":38}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:d,c.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,r)}var c=t("./async.js"),l=t("./util.js"),f=l.tryCatch,p=l.errorObj,h={},d=[];l.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(r[n]===h){if(r[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return r[n]=t,void this._queue.push(n);null!==s&&(s[n]=t);var u=this._callback,c=this._promise._boundTo;this._promise._pushContext();var l=f(u).call(c,t,n,o);if(this._promise._popContext(),l===p)return this._reject(l.e);var d=i(l,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,r[n]=h,d._proxyPromiseArray(this,n);if(!d._isFulfilled())return this._reject(d._reason());l=d._value()}r[n]=l}var v=++this._totalResolved;v>=o&&(null!==s?this._filter(r,s):this._resolve(r))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},e.map=function(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,n,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t,r,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new e(n);u._captureStackTrace(),u._pushContext();var c=o.isArray(r)?s(t).apply(a,r):s(t).call(a,r);return u._popContext(),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundTo,[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundTo,i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=n._target(),i=r._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(n._boundTo,t);o===u&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util.js"),i=t("./async.js"),o=r.tryCatch,s=r.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t);

},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var n=t.value,i=t.handler,a=t.promise,u=t.receiver,c=o(i).call(u,n);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=r.canAttachTrace(c.e)?c.e:new Error(r.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){for(var r=this._length(),o=this._progress,s=0;r>s;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof n&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e,n){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new c("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new c("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==l&&this._resolveFromResolver(t)}function n(t){var n=new e(l);n._fulfillmentHandler0=t,n._rejectionHandler0=t,n._progressHandler0=t,n._promise0=t,n._receiver0=t,n._settledValue=t}var r=function(){return new c("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new e.PromiseInspection(this._target())},o=function(t){return e.reject(new c(t))},s=t("./util.js"),a=t("./async.js"),u=t("./errors.js"),c=e.TypeError=u.TypeError;e.RangeError=u.RangeError,e.CancellationError=u.CancellationError,e.TimeoutError=u.TimeoutError,e.OperationalError=u.OperationalError,e.RejectionError=u.OperationalError,e.AggregateError=u.AggregateError;var l=function(){},f={},p={e:null},h=t("./thenables.js")(e,l),d=t("./promise_array.js")(e,l,h,o),v=t("./captured_trace.js")(),y=t("./debuggability.js")(e,v),g=t("./context.js")(e,v,y),_=t("./catch_filter.js")(p),m=t("./promise_resolver.js"),b=m._nodebackForPromise,j=s.errorObj,w=s.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var n=arguments.length;if(n>1){var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var s=arguments[r];if("function"!=typeof s)return e.reject(new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[r];var a=new _(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},e.prototype.then=function(t,e,n){if(y()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(r+=", "+s.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},e.prototype.done=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);r._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,f,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new d(this).promise()},e.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var n=new e(l),r=w(t)(b(n));return r===j&&n._rejectCallback(r.e,!0,!0),n},e.all=function(t){return new d(t).promise()},e.defer=e.pending=function(){var t=new e(l);return new m(t)},e.cast=function(t){var n=h(t);if(!(n instanceof e)){var r=n;n=new e(l),n._fulfillUnchecked(r)}return n},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var n=new e(l);return n._captureStackTrace(),n._rejectCallback(t,!0),n},e.setScheduler=function(t){if("function"!=typeof t)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},e.prototype._then=function(t,n,r,i,o){var s=void 0!==o,u=s?o:new e(l);s||(u._propagateFrom(this,5),u._captureStackTrace());var c=this._target();c!==this&&(void 0===i&&(i=this._boundTo),s||u._setIsMigrated());var f=c._addCallbacks(t,n,r,u,i);return c._isResolved()&&!c._isSettlePromisesQueued()&&a.invoke(c._settlePromiseAtPostResolution,c,f),u},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,n){var r=t._fulfillmentHandlerAt(n),i=t._rejectionHandlerAt(n),o=t._progressHandlerAt(n),s=t._promiseAt(n),a=t._receiverAt(n);s instanceof e&&s._setIsMigrated(),this._addCallbacks(r,i,o,s,a)},e.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof n&&(this._progressHandler0=n);else{var s=5*o-5;this[s+3]=r,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof n&&(this[s+2]=n)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,n){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(r(),!1,!0);var i=h(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(n?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),u=0;a>u;++u)s._migrateCallbacks(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,n){n||s.markAsOriginatingFromRejection(t);var r=s.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,e?i:!1),this._reject(t,i?void 0:r)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=w(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===j&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,n,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==f||this._isRejected()?w(t).call(e,n):w(t).apply(this._boundTo,n),i._popContext(),o===j||o===i||o===p){var s=o===i?r():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var n=this._promiseAt(t),r=n instanceof e;if(r&&n._isMigrated())return n._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,u=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?r?this._settlePromiseFromHandler(i,u,s,n):i.call(u,s,n):u instanceof d?u._isResolved()||(this._isFulfilled()?u._promiseFulfilled(s,n):u._promiseRejected(s,n)):r&&(this._isFulfilled()?n._fulfill(s):n._reject(s,o)),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=r();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var n=r();return this._attachExtraTrace(n),this._rejectUnchecked(n)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(v.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=r,t("./progress.js")(e,d),t("./method.js")(e,l,h,o),t("./bind.js")(e,l,h),t("./finally.js")(e,p,h),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,d,h,l),e.Promise=e,t("./map.js")(e,d,o,h,l),t("./cancel.js")(e),t("./using.js")(e,o,h,g),t("./generators.js")(e,o,l,h),t("./nodeify.js")(e),t("./call_get.js")(e),t("./props.js")(e,d,h,o),t("./race.js")(e,l,h,o),t("./reduce.js")(e,d,o,h,l),t("./settle.js")(e,d),t("./some.js")(e,d,o),t("./promisify.js")(e,l),t("./any.js")(e),t("./each.js")(e,l),t("./timers.js")(e,l),t("./filter.js")(e,l),s.toFastProperties(e),s.toFastProperties(e.prototype),n({a:1}),n({b:2}),n({c:3}),n(1),n(function(){}),n(void 0),n(!1),n(new e(l)),v.setBounds(a.firstLineError,s.lastLineError),e}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r,i=this._promise=new e(n);t instanceof e&&(r=t,i._propagateFrom(r,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),u=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function c(t,n){var s=r(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(c,this._reject,void 0,this,n):void this._reject(s._reason());if(s=s._value(),!u(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!u(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(-5===n?this._resolveEmptyArray():this._resolve(o(n)));var l=this.getActualLength(s.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var f=this._promise,p=0;l>p;++p){var h=this._isResolved(),d=r(s[p],f);d instanceof e?(d=d._target(),h?d._unsetRejectionIsUnhandled():d._isPending()?d._proxyPromiseArray(this,p):d._isFulfilled()?this._promiseFulfilled(d._value(),p):this._promiseRejected(d._reason(),p)):h||this._promiseFulfilled(d,p)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&h.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new f(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=h.keys(t),i=0;i<n.length;++i){var o=n[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,n){if(null!==t){if(e){var r=i(u(e));t._attachExtraTrace(r),t._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(n);t=null}}}var s,a=t("./util.js"),u=a.maybeWrapAsError,c=t("./errors.js"),l=c.TimeoutError,f=c.OperationalError,p=a.haveGetters,h=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=p?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},p){var v={get:function(){return o(this.promise)}};h.defineProperty(s.prototype,"asCallback",v),h.defineProperty(s.prototype,"callback",v)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!j.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new _("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,n,r){for(var a=h.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],f=t[l],p=r===w?!0:w(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,p)||u.push(l,f)}return s(u,e,n),u}function u(t,r,i,o){function s(){var i=r;r===p&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:t,c=d(o);try{s.apply(i,v(arguments,c))}catch(l){o._rejectCallback(y(l),!0,!0)}return o}var a=function(){return this}(),u=t;return"string"==typeof u&&(t=o),s.__isPromisified__=!0,s}function c(t,e,n,r){for(var i=new RegExp(k(e)+"$"),o=a(t,e,i,n),s=0,u=o.length;u>s;s+=2){var c=o[s],l=o[s+1],f=c+e;t[f]=r===x?x(c,p,c,l,e):r(l,function(){return x(c,p,c,l,e)})}return h.toFastProperties(t),t}function l(t,e){return x(t,e,void 0,t)}var f,p={},h=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,v=h.withAppended,y=h.maybeWrapAsError,g=h.canEvaluate,_=t("./errors").TypeError,m="Async",b={__isPromisified__:!0},j=/^(?:length|name|arguments|caller|callee|prototype|__isPromisified__)$/,w=function(t,e){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&!h.isClass(e)},k=function(t){return t.replace(/([$])/,"\\$")},x=g?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new _("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var n=l(t,arguments.length<2?p:e);return h.copyDescriptors(t,n,r),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new _("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n=m);var r=e.filter;"function"!=typeof r&&(r=w);var i=e.promisifier;if("function"!=typeof i&&(i=x),!h.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=h.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&h.isClass(a)&&(c(a.prototype,n,r,i),c(a,n,r,i))}return c(t,n,r,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){for(var e=c.keys(t),n=e.length,r=new Array(2*n),i=0;n>i;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function s(t){var n,s=r(t);return u(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),u=a.isObject,c=t("./es5.js");a.inherits(o,n),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){for(var r={},i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o];this._resolve(r)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],29:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(n);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,f=c._reject,p=0,h=t.length;h>p;++p){var d=t[p];(void 0!==d||p in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t,n,r,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(r,this._promise),l=!1,f=u instanceof e;f&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(r=u._value(),this._gotAccum=!0):(this._reject(u._reason()),l=!0)),f||this._zerothIsAccum||(this._gotAccum=!0),this._callback=n,this._accum=r,l||c.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,n,i){if("function"!=typeof e)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,n,i);return o.promise()}var c=t("./async.js"),l=t("./util.js"),f=l.tryCatch,p=l.errorObj;l.inherits(s,n),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,n){var r=this._values;r[n]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;s>o;++o)l[o]=0;if(o=l[n],0===n&&this._zerothIsAccum?(this._accum=t,this._gotAccum=c=!0,l[n]=0===o?1:2):-1===n?(this._accum=t,this._gotAccum=c=!0):0===o?l[n]=1:(l[n]=2,this._accum=t),c){for(var h,d=this._callback,v=this._promise._boundTo,y=this._reducingIndex;s>y;++y)if(o=l[y],2!==o){if(1!==o)return;if(t=r[y],this._promise._pushContext(),u?(a.push(t),h=f(d).call(v,t,y,s)):h=f(d).call(v,this._accum,t,y,s),this._promise._popContext(),h===p)return this._reject(h.e);var g=i(h,this._promise);if(g instanceof e){if(g=g._target(),g._isPending())return l[y]=4,g._proxyPromiseArray(this,y);if(!g._isFulfilled())return this._reject(g._reason());h=g._value()}this._reducingIndex=y+1,this._accum=h}else this._reducingIndex=y+1;this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./async.js":2,"./util.js":38}],31:[function(e,n,i){"use strict";var o,s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(e("./util.js").isNode){var a=t.versions.node.split(".").map(Number);o=0===a[0]&&a[1]>10||a[0]>0?r.setImmediate:t.nextTick,o||(o="undefined"!=typeof setImmediate?setImmediate:"undefined"!=typeof setTimeout?setTimeout:s)}else"undefined"!=typeof MutationObserver?(o=function(t){var e=document.createElement("div"),n=new MutationObserver(t);return n.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0):o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:s;n.exports=o},{"./util.js":38}],32:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(r,n),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var n=new i;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},e.settle=function(t){return new r(t).promise()},e.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":38}],33:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;if(o(t)){var l=new e(n);return t._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var f=a.tryCatch(i)(t);if(f===u){r&&r._pushContext();var l=e.reject(f.e);return r&&r._popContext(),l}if("function"==typeof f)return s(t,f,r)}return t}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(t,r,i){function o(n){l&&(t===n?l._rejectCallback(e._makeSelfResolutionError(),!1,!0):l._resolveCallback(n),l=null)}function s(t){l&&(l._rejectCallback(t,p,!0),l=null)}function c(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new e(n),f=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var p=!0,h=a.tryCatch(r).call(t,o,s,c);return p=!1,l&&h===u&&(l._rejectCallback(h.e,!0,!0),l=null),f}var a=t("./util.js"),u=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return r}},{"./util.js":38}],36:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){
if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var n=new s(e);o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){if(void 0===r){r=t,t=void 0;var i=new e(n);return setTimeout(function(){i._fulfill()},r),i}return r=+r,e.resolve(t)._then(u,null,null,r,void 0)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){for(var n=t.length,r=0;n>r;++r){var i=t[r];if(i.isRejected())return e.reject(i.error());t[r]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(o>=u)return c.resolve();var l=a(t[o++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(f){return s(f)}if(l instanceof e)return l._then(i,s,null,null,null)}i()}var o=0,u=t.length,c=e.defer();return i(),c.promise}function c(t){var e=new y;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new y;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function f(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,v=t("./util.js").inherits,y=e.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,f),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var s=new Array(t),a=0;t>a;++a){var u=arguments[a];if(f.isDisposer(u)){var p=u;u=u.promise(),u._setDisposable(p)}else{var d=r(u);d instanceof e&&(u=d._then(h,null,null,{resources:s,index:a},void 0))}s[a]=u}var v=e.settle(s).then(o).then(function(t){v._pushContext();var e;try{e=i.apply(void 0,t)}finally{v._popContext()}return e})._then(c,l,void 0,s,void 0);return s.promise=v,v},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(e,n,r){"use strict";function i(){try{return C.apply(this,arguments)}catch(t){return T.e=t,T}}function o(t){return C=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function u(t){return s(t)?new Error(g(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function f(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,r),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=k.names(t.prototype);return k.isES5?e.length>1:e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(n){return!1}}function d(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function v(t){return S.test(t)}function y(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function g(t){try{return t+""}catch(e){return"[no string representation]"}}function _(t){try{f(t,"isOperational",!0)}catch(e){}}function m(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return t instanceof Error&&k.propertyIsWritable(t,"stack")}function j(t){return{}.toString.call(t)}function w(t,e,n){for(var r=k.names(t),i=0;i<r.length;++i){var o=r[i];n(o)&&k.defineProperty(e,o,k.getDescriptor(t,o))}}var k=e("./es5.js"),x="undefined"==typeof navigator,E=function(){try{var t={};return k.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),T={e:{}},C,O=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},A=function(){return"string"!==this}.call("string"),R=function(){if(k.isES5){var t=Object.prototype,e=Object.getOwnPropertyNames;return function(n){for(var r=[],i=Object.create(null);null!=n&&n!==t;){var o;try{o=e(n)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(n,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}n=k.getPrototypeOf(n)}return r}}return function(t){var e=[];for(var n in t)e.push(n);return e}}(),S=/^[a-z$_][a-z$_0-9]*$/i,P=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(g(t))}:function(t){if(b(t))return t;try{throw new Error(g(t))}catch(e){return e}}}(),F={isClass:h,isIdentifier:v,inheritedDataKeys:R,getDataPropertyOrDefault:l,thrower:p,isArray:k.isArray,haveGetters:E,notEnumerableProp:f,isPrimitive:s,isObject:a,canEvaluate:x,errorObj:T,tryCatch:o,inherits:O,withAppended:c,maybeWrapAsError:u,wrapsPrimitiveReceiver:A,toFastProperties:d,filledRange:y,toString:g,canAttachTrace:b,ensureErrorObject:P,originatesFromRejection:m,markAsOriginatingFromRejection:_,classString:j,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof t&&"[object process]"===j(t).toLowerCase()};try{throw new Error}catch(D){F.lastLineError=D}n.exports=F},{"./es5.js":14}],39:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:4}],4:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var r=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){r.length||i.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],5:[function(t,e,n){!function(t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof e){var n=e.exports=t();n.HashMap=n}else this.HashMap=t()}(function(){function t(t){switch(this.clear(),arguments.length){case 0:break;case 1:this.copy(t);break;default:e(this,arguments)}}function e(t,e){for(var n=0;n<e.length;n+=2)t.set(e[n],e[n+1])}function n(t){return function(){return t.apply(this,arguments),this}}function r(t,e){Object.defineProperty&&Object.defineProperty(t,e,{enumerable:!1})}var i=t.prototype={constructor:t,get:function(t){var e=this._data[this.hash(t)];return e&&e[1]},set:function(t,e){this._data[this.hash(t)]=[t,e]},multi:function(){e(this,arguments)},copy:function(t){for(var e in t._data)this._data[e]=t._data[e]},has:function(t){return this.hash(t)in this._data},search:function(t){for(var e in this._data)if(this._data[e][1]===t)return this._data[e][0];return null},remove:function(t){delete this._data[this.hash(t)]},type:function(t){var e=Object.prototype.toString.call(t),n=e.slice(8,-1).toLowerCase();return"domwindow"!==n||t?n:t+""},keys:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},count:function(){return this.keys().length},clear:function(){this._data={}},clone:function(){return new t(this)},hash:function(e){switch(this.type(e)){case"undefined":case"null":case"boolean":case"number":case"regexp":return e+"";case"date":return"♣"+e.getTime();case"string":return"♠"+e;case"array":for(var n=[],i=0;i<e.length;i++)n[i]=this.hash(e[i]);return"♥"+n.join("⁞");default:return e._hmuid_||(e._hmuid_=++t.uid,r(e,"_hmuid_")),"♦"+e._hmuid_}},forEach:function(t,e){for(var n in this._data){var r=this._data[n];t.call(e||this,r[1],r[0])}}};t.uid=0;for(var o in i)if("constructor"!==o&&i.hasOwnProperty(o)){var s=i[o];-1===s.toString().indexOf("return ")&&(i[o]=n(s))}return t})},{}],6:[function(t,e,n){!function r(e,n,i){function o(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof t&&t;if(!u&&c)return c(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,r,e,n,i)}return n[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){e.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.4.1",options:{}}},{}],2:[function(t,e,n){"use strict";e.exports=function(t){var e;return e=t.getJquery(),{get:function(n){return function(n,r){var i;return i=t.getOAuthdURL(),e.ajax({url:i+n,type:"get",data:r})}}(this),post:function(n){return function(n,r){var i;return i=t.getOAuthdURL(),e.ajax({url:i+n,type:"post",data:r})}}(this),put:function(n){return function(n,r){var i;return i=t.getOAuthdURL(),e.ajax({url:i+n,type:"put",data:r})}}(this),del:function(n){return function(n,r){var i;return i=t.getOAuthdURL(),e.ajax({url:i+n,type:"delete",data:r})}}(this)}}},{}],3:[function(t,e,n){"use strict";var r,i,o,s,a;s=t("../config"),i=t("../tools/url"),r=t("../tools/location_operations"),a=t("../tools/cookies"),o=t("../tools/cache"),e.exports=function(t,e,n,u){var c,l;return i=i(e),a.init(s,e),l=r(e),o.init(a,s),c={initialize:function(t,e){var n;if(s.key=t,e)for(n in e)s.options[n]=e[n]},setOAuthdURL:function(t){s.oauthd_url=t,s.oauthd_base=i.getAbsUrl(s.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},getOAuthdURL:function(){return s.oauthd_url},getVersion:function(){return s.version},extend:function(t,e){return this[t]=e(this)},getConfig:function(){return s},getWindow:function(){return t},getDocument:function(){return e},getNavigator:function(){return u},getJquery:function(){return n},getUrl:function(){return i},getCache:function(){return o},getCookies:function(){return a},getLocationOperations:function(){return l}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/url":14}],4:[function(t,e,n){"use strict";var r,i,o;r=t("../tools/cookies"),i=t("./request"),o=t("../tools/sha1"),e.exports=function(e){var n,s,a,u,c,l,f,p,h,d,v,y,g;return s=e.getUrl(),c=e.getConfig(),l=e.getDocument(),g=e.getWindow(),n=e.getJquery(),a=e.getCache(),y=t("./providers")(e),c.oauthd_base=s.getAbsUrl(c.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0],u=[],h=void 0,(v=function(){var t,e;e=/[\\#&]oauthio=([^&]*)/.exec(l.location.hash),e&&(l.location.hash=l.location.hash.replace(/&?oauthio=[^&]*/,""),h=decodeURIComponent(e[1].replace(/\+/g," ")),t=r.readCookie("oauthio_state"),t&&(u.push(t),r.eraseCookie("oauthio_state")))})(),f=e.getLocationOperations(),d={request:i(e,u,y)},p={initialize:function(t,n){return e.initialize(t,n)},setOAuthdURL:function(t){c.oauthd_url=t,c.oauthd_base=s.getAbsUrl(c.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},create:function(t,e,n){var r,i,o,s;if(!e)return a.tryCache(p,t,!0);"object"!=typeof n&&y.fetchDescription(t),i=function(r){return d.request.mkHttp(t,e,n,r)},o=function(r,i){return d.request.mkHttpEndpoint(t,e,n,r,i)},s={};for(r in e)s[r]=e[r];return s.get=i("GET"),s.post=i("POST"),s.put=i("PUT"),s.patch=i("PATCH"),s.del=i("DELETE"),s.me=d.request.mkHttpMe(t,e,n,"GET"),s},popup:function(t,e,r){var i,f,h,v,y,_,m,b,j,w,k;return v=!1,h=function(t){if(!v){if(t.origin!==c.oauthd_base)return;try{b.close()}catch(n){}return e.data=t.data,d.request.sendCallback(e,i),v=!0}},b=void 0,f=void 0,j=void 0,i=n.Deferred(),e=e||{},c.key?(2===arguments.length&&"function"==typeof e&&(r=e,e={}),a.cacheEnabled(e.cache)&&(_=a.tryCache(p,t,e.cache))?(null!=i&&i.resolve(_),r?r(null,_):i.promise()):(e.state||(e.state=o.create_hash(),e.state_type="client"),u.push(e.state),m=c.oauthd_url+"/auth/"+t+"?k="+c.key,m+="&d="+encodeURIComponent(s.getAbsUrl("/")),e&&(m+="&opts="+encodeURIComponent(JSON.stringify(e))),e.wnd_settings?(k=e.wnd_settings,delete e.wnd_settings):k={width:Math.floor(.8*g.outerWidth),height:Math.floor(.5*g.outerHeight)},k.width<1e3&&(k.width=1e3),k.height<630&&(k.height=630),k.left=Math.floor(g.screenX+(g.outerWidth-k.width)/2),k.top=Math.floor(g.screenY+(g.outerHeight-k.height)/8),w="width="+k.width+",height="+k.height,w+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",w+=",left="+k.left+",top="+k.top,e={provider:t,cache:e.cache},e.callback=function(t,n){return g.removeEventListener?g.removeEventListener("message",h,!1):g.detachEvent?g.detachEvent("onmessage",h):l.detachEvent&&l.detachEvent("onmessage",h),e.callback=function(){},j&&(clearTimeout(j),j=void 0),r?r(t,n):void 0},g.attachEvent?g.attachEvent("onmessage",h):l.attachEvent?l.attachEvent("onmessage",h):g.addEventListener&&g.addEventListener("message",h,!1),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(t,e,n){return t.origin=e.url.match(/^.{2,5}:\/\/[^/]+/)[0],h(t)}),!f&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&(f=l.createElement("iframe"),f.src=c.oauthd_url+"/auth/iframe?d="+encodeURIComponent(s.getAbsUrl("/")),f.width=0,f.height=0,f.frameBorder=0,f.style.visibility="hidden",l.body.appendChild(f)),j=setTimeout(function(){null!=i&&i.reject(new Error("Authorization timed out")),e.callback&&"function"==typeof e.callback&&e.callback(new Error("Authorization timed out"));try{b.close()}catch(t){}},12e5),b=g.open(m,"Authorization",w),b?(b.focus(),y=g.setInterval(function(){return null!==b&&!b.closed||(g.clearInterval(y),v||(null!=i&&i.reject(new Error("The popup was closed")),!e.callback||"function"!=typeof e.callback))?void 0:e.callback(new Error("The popup was closed"))},500)):(null!=i&&i.reject(new Error("Could not open a popup")),e.callback&&"function"==typeof e.callback&&e.callback(new Error("Could not open a popup"))),null!=i?i.promise():void 0)):(null!=i&&i.reject(new Error("OAuth object must be initialized")),null==r?i.promise():r(new Error("OAuth object must be initialized")))},redirect:function(t,e,n){var i,u;return 2===arguments.length&&(n=e,e={}),a.cacheEnabled(e.cache)&&(u=a.tryCache(p,t,e.cache))?(n=s.getAbsUrl(n)+(-1===n.indexOf("#")?"#":"&")+"oauthio=cache",f.changeHref(n),void f.reload()):(e.state||(e.state=o.create_hash(),e.state_type="client"),r.createCookie("oauthio_state",e.state),i=encodeURIComponent(s.getAbsUrl(n)),n=c.oauthd_url+"/auth/"+t+"?k="+c.key,n+="&redirect_uri="+i,e&&(n+="&opts="+encodeURIComponent(JSON.stringify(e))),void f.changeHref(n))},callback:function(t,e,r){var i,o;if(i=n.Deferred(),1===arguments.length&&"function"==typeof t&&(r=t,t=void 0,e={}),1===arguments.length&&"string"==typeof t&&(e={}),2===arguments.length&&"function"==typeof e&&(r=e,e={}),a.cacheEnabled(e.cache)||"cache"===h){if(o=a.tryCache(p,t,e.cache),"cache"===h&&("string"!=typeof t||!t))return null!=i&&i.reject(new Error("You must set a provider when using the cache")),r?r(new Error("You must set a provider when using the cache")):null!=i?i.promise():void 0;if(o){if(!r)return null!=i&&i.resolve(o),null!=i?i.promise():void 0;if(o)return r(null,o)}}return h?(d.request.sendCallback({data:h,provider:t,cache:e.cache,callback:r},i),null!=i?i.promise():void 0):void 0},clearCache:function(t){r.eraseCookie("oauthio_provider_"+t)},http_me:function(t){d.request.http_me&&d.request.http_me(t)},http:function(t){d.request.http&&d.request.http(t)},getVersion:function(){return e.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":13,"./providers":5,"./request":6}],5:[function(t,e,n){"use strict";var r;r=t("../config"),e.exports=function(t){var e,n,i,o;return e=t.getJquery(),o={},i={},n={execProvidersCb:function(t,e,n){var r,o;if(i[t]){r=i[t],delete i[t];for(o in r)r[o](e,n)}},fetchDescription:function(t){o[t]||(o[t]=!0,e.ajax({url:r.oauthd_api+"/providers/"+t,data:{extend:!0},dataType:"json"}).done(function(e){o[t]=e.data,n.execProvidersCb(t,null,e.data)}).always(function(){"object"!=typeof o[t]&&(delete o[t],n.execProvidersCb(t,new Error("Unable to fetch request description")))}))},getDescription:function(t,e,r){return e=e||{},"object"==typeof o[t]?r(null,o[t]):(o[t]||n.fetchDescription(t),e.wait?(i[t]=i[t]||[],void i[t].push(r)):r(null,{}))}}}},{"../config":1}],6:[function(t,e,n){"use strict";var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i=t("../tools/url")(),r=t("q"),e.exports=function(t,e,n){var s,a,u,c,l;return s=t.getJquery(),u=t.getConfig(),a=t.getCache(),c=[],l=!1,{retrieveMethods:function(){var t;return t=r.defer(),l?t.resolve(c):s.ajax(u.oauthd_url+"/api/extended-endpoints").then(function(e){return c=e.data,l=!0,t.resolve()}).fail(function(e){return l=!0,t.reject(e)}),t.promise},generateMethods:function(t,e,n){var r,i,o,s,a,u,l;if(null!=c){l=[];for(r in c)a=c[r],o=a.name.split("."),s=t,l.push(function(){var t;t=[];for(i in o)u=o[i],i<o.length-1?(null==s[u]&&(s[u]={}),t.push(s=s[u])):t.push(s[u]=this.mkHttpAll(n,e,a,arguments));return t}.apply(this,arguments));return l}},http:function(t){var e,r,a,c,l;a=function(){var t,e,n,r;if(r=l.oauthio.request||{},!r.cors){l.url=encodeURIComponent(l.url),"/"!==l.url[0]&&(l.url="/"+l.url),l.url=u.oauthd_url+"/request/"+l.oauthio.provider+l.url,l.headers=l.headers||{},l.headers.oauthio="k="+u.key,l.oauthio.tokens.oauth_token&&l.oauthio.tokens.oauth_token_secret&&(l.headers.oauthio+="&oauthv=1");for(e in l.oauthio.tokens)l.headers.oauthio+="&"+encodeURIComponent(e)+"="+encodeURIComponent(l.oauthio.tokens[e]);return delete l.oauthio,s.ajax(l)}if(l.oauthio.tokens){if(l.oauthio.tokens.access_token&&(l.oauthio.tokens.token=l.oauthio.tokens.access_token),l.url.match(/^[a-z]{2,16}:\/\//)||("/"!==l.url[0]&&(l.url="/"+l.url),l.url=r.url+l.url),l.url=i.replaceParam(l.url,l.oauthio.tokens,r.parameters),r.query){n=[];for(t in r.query)n.push(encodeURIComponent(t)+"="+encodeURIComponent(i.replaceParam(r.query[t],l.oauthio.tokens,r.parameters)));l.url+=o.call(l.url,"?")>=0?"&"+n:"?"+n}if(r.headers){l.headers=l.headers||{};for(t in r.headers)l.headers[t]=i.replaceParam(r.headers[t],l.oauthio.tokens,r.parameters)}return delete l.oauthio,s.ajax(l)}},l={},c=void 0;for(c in t)l[c]=t[c];return l.oauthio.request&&l.oauthio.request!==!0?a():(r={wait:!!l.oauthio.request},e=s.Deferred(),n.getDescription(l.oauthio.provider,r,function(t,n){return t?e.reject(t):(l.oauthio.request=l.oauthio.tokens.oauth_token&&l.oauthio.tokens.oauth_token_secret?n.oauth1&&n.oauth1.request:n.oauth2&&n.oauth2.request,void e.resolve())}),e.then(a))},http_me:function(t){var e,r,i,o,a;i=function(){var t,e,n,r;t=s.Deferred(),r=a.oauthio.request||{},a.url=u.oauthd_url+"/auth/"+a.oauthio.provider+"/me",a.headers=a.headers||{},a.headers.oauthio="k="+u.key,a.oauthio.tokens.oauth_token&&a.oauthio.tokens.oauth_token_secret&&(a.headers.oauthio+="&oauthv=1");for(e in a.oauthio.tokens)a.headers.oauthio+="&"+encodeURIComponent(e)+"="+encodeURIComponent(a.oauthio.tokens[e]);return delete a.oauthio,n=s.ajax(a),s.when(n).done(function(e){t.resolve(e.data)}).fail(function(e){t.reject(e.responseJSON?e.responseJSON.data:new Error("An error occured while trying to access the resource"))}),t.promise()},a={};for(o in t)a[o]=t[o];return a.oauthio.request&&a.oauthio.request!==!0?i():(r={wait:!!a.oauthio.request},e=s.Deferred(),n.getDescription(a.oauthio.provider,r,function(t,n){return t?e.reject(t):(a.oauthio.request=a.oauthio.tokens.oauth_token&&a.oauthio.tokens.oauth_token_secret?n.oauth1&&n.oauth1.request:n.oauth2&&n.oauth2.request,void e.resolve())}),e.then(i))},http_all:function(t,e,n){var r;return(r=function(){var e,n,r,i;e=s.Deferred(),i=t.oauthio.request||{},t.headers=t.headers||{},t.headers.oauthio="k="+u.key,t.oauthio.tokens.oauth_token&&t.oauthio.tokens.oauth_token_secret&&(t.headers.oauthio+="&oauthv=1");for(n in t.oauthio.tokens)t.headers.oauthio+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t.oauthio.tokens[n]);return delete t.oauthio,r=s.ajax(t),s.when(r).done(function(t){var n;if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(r){n=r,t.data=t.data}finally{e.resolve(t.data)}}).fail(function(t){e.reject(t.responseJSON?t.responseJSON.data:new Error("An error occured while trying to access the resource"))}),e.promise()})()},mkHttp:function(t,e,n,r){var i;return i=this,function(o,s){var a,u;if(u={},"string"==typeof o){if("object"==typeof s)for(a in s)u[a]=s[a];u.url=o}else if("object"==typeof o)for(a in o)u[a]=o[a];return u.type=u.type||r,u.oauthio={provider:t,tokens:e,request:n},i.http(u)}},mkHttpMe:function(t,e,n,r){var i;return i=this,function(o){var s;return s={},s.type=s.type||r,s.oauthio={provider:t,tokens:e,request:n},s.data=s.data||{},s.data.filter=o?o.join(","):void 0,i.http_me(s)}},mkHttpAll:function(t,e,n){var r;return r=this,function(){var i,o,s,a;o={},o.type=n.method,o.url=u.oauthd_url+n.endpoint.replace(":provider",t),o.oauthio={provider:t,tokens:e},o.data={};for(i in arguments)a=arguments[i],s=n.params[i],null!=s&&(o.data[s.name]=a);return o.data=o.data||{},r.http_all(o,n,arguments)}},sendCallback:function(t,n){var r,i,o,s,u,c,l,f,p,h,d;r=this,i=void 0,s=void 0;try{i=JSON.parse(t.data)}catch(v){return o=v,n.reject(new Error("Error while parsing result")),t.callback(new Error("Error while parsing result"))}if(i&&i.provider){if(t.provider&&i.provider.toLowerCase()!==t.provider.toLowerCase())return s=new Error("Returned provider name does not match asked provider"),n.reject(s),t.callback&&"function"==typeof t.callback?t.callback(s):void 0;if("error"===i.status||"fail"===i.status)return s=new Error(i.message),s.body=i.data,n.reject(s),t.callback&&"function"==typeof t.callback?t.callback(s):void 0;if("success"!==i.status||!i.data)return s=new Error,s.body=i.data,n.reject(s),t.callback&&"function"==typeof t.callback?t.callback(s):void 0;i.state=i.state.replace(/\s+/g,"");for(c in e)d=e[c],e[c]=d.replace(/\s+/g,"");if(!i.state||-1===e.indexOf(i.state))return n.reject(new Error("State is not matching")),t.callback&&"function"==typeof t.callback?t.callback(new Error("State is not matching")):void 0;if(t.provider||(i.data.provider=i.provider),p=i.data,p.provider=i.provider.toLowerCase(),a.cacheEnabled(t.cache)&&p&&a.storeCache(i.provider,p),f=p.request,delete p.request,h=void 0,p.access_token?h={access_token:p.access_token}:p.oauth_token&&p.oauth_token_secret&&(h={oauth_token:p.oauth_token,oauth_token_secret:p.oauth_token_secret}),!f)return n.resolve(p),t.callback&&"function"==typeof t.callback?t.callback(null,p):void 0;if(f.required)for(u in f.required)h[f.required[u]]=p[f.required[u]];return l=function(t){return r.mkHttp(i.provider,h,f,t)},p.toJson=function(){var t;return t={},null!=p.access_token&&(t.access_token=p.access_token),null!=p.oauth_token&&(t.oauth_token=p.oauth_token),null!=p.oauth_token_secret&&(t.oauth_token_secret=p.oauth_token_secret),null!=p.expires_in&&(t.expires_in=p.expires_in),null!=p.token_type&&(t.token_type=p.token_type),null!=p.id_token&&(t.id_token=p.id_token),null!=p.provider&&(t.provider=p.provider),null!=p.email&&(t.email=p.email),t},p.get=l("GET"),p.post=l("POST"),p.put=l("PUT"),p.patch=l("PATCH"),p.del=l("DELETE"),p.me=r.mkHttpMe(i.provider,h,f,"GET"),this.retrieveMethods().then(function(e){return function(){return e.generateMethods(p,h,i.provider),n.resolve(p),t.callback&&"function"==typeof t.callback?t.callback(null,p):void 0}}(this)).fail(function(e){return function(e){return console.log("Could not retrieve methods",e),n.resolve(p),t.callback&&"function"==typeof t.callback?t.callback(null,p):void 0}}(this))}}}}},{"../tools/url":14,q:16}],7:[function(t,e,n){"use strict";e.exports=function(t){var e,n,r,i,o;return e=t.getJquery(),r=t.getConfig(),i=t.getCookies(),o=null,n=function(){function n(t){this.token=t.token,this.data=t.user,this.providers=t.providers,o=this.getEditableData()}return n.prototype.getEditableData=function(){var t,e;t=[];for(e in this.data)-1===["id","email"].indexOf(e)&&t.push({key:e,value:this.data[e]});return t},n.prototype.save=function(){var e,n,i,s,a,u,c,l;for(n={},s=0,u=o.length;u>s;s++)e=o[s],this.data[e.key]!==e.value&&(n[e.key]=this.data[e.key]),null===this.data[e.key]&&delete this.data[e.key];for(i=function(t){var e,n,r;for(n=0,r=o.length;r>n;n++)if(e=o[n],e.key===t)return!0;return!1},l=this.getEditableData(),a=0,c=l.length;c>a;a++)e=l[a],i(e.key)||(n[e.key]=this.data[e.key]);return this.saveLocal(),t.API.put("/api/usermanagement/user?k="+r.key+"&token="+this.token,n)},n.prototype.select=function(t){var e;return e=null},n.prototype.saveLocal=function(){var t;return t={token:this.token,user:this.data,providers:this.providers},i.eraseCookie("oio_auth"),i.createCookie("oio_auth",JSON.stringify(t),21600)},n.prototype.hasProvider=function(t){var e;return-1!==(null!=(e=this.providers)?e.indexOf(t):void 0)},n.prototype.getProviders=function(){var n;return n=e.Deferred(),t.API.get("/api/usermanagement/user/providers?k="+r.key+"&token="+this.token).done(function(t){return function(e){return t.providers=e.data,t.saveLocal(),n.resolve(t.providers)}}(this)).fail(function(t){return n.reject(t)}),n.promise()},n.prototype.addProvider=function(n){var i;return i=e.Deferred(),"function"==typeof n.toJson&&(n=n.toJson()),n.email=this.data.email,this.providers.push(n.provider),t.API.post("/api/usermanagement/user/providers?k="+r.key+"&token="+this.token,n).done(function(t){return function(e){return t.data=e.data,t.saveLocal(),i.resolve()}}(this)).fail(function(t){return function(e){return t.providers.splice(t.providers.indexOf(n.provider),1),i.reject(e)}}(this)),i.promise()},n.prototype.removeProvider=function(n){var i;return i=e.Deferred(),this.providers.splice(this.providers.indexOf(n),1),t.API.del("/api/usermanagement/user/providers/"+n+"?k="+r.key+"&token="+this.token).done(function(t){return function(e){return t.saveLocal(),i.resolve(e)}}(this)).fail(function(t){return function(e){return t.providers.push(n),i.reject(e)}}(this)),i.promise()},n.prototype.changePassword=function(e,n){return t.API.post("/api/usermanagement/user/password?k="+r.key+"&token="+this.token,{password:n})},n.prototype.isLoggued=function(){return t.User.isLogged()},n.prototype.logout=function(){var n;return n=e.Deferred(),i.eraseCookie("oio_auth"),t.API.post("/api/usermanagement/user/logout?k="+r.key+"&token="+this.token).done(function(){return n.resolve()}).fail(function(t){
return n.reject(t)}),n.promise()},n}(),{initialize:function(e,n){return t.initialize(e,n)},setOAuthdURL:function(e){return t.setOAuthdURL(e)},signup:function(o){var s;return s=e.Deferred(),"function"==typeof o.toJson&&(o=o.toJson()),t.API.post("/api/usermanagement/signup?k="+r.key,o).done(function(t){return i.createCookie("oio_auth",JSON.stringify(t.data),t.data.expires_in||21600),s.resolve(new n(t.data))}).fail(function(t){return s.reject(t)}),s.promise()},signin:function(o,s){var a,u;return a=e.Deferred(),"string"==typeof o||s?t.API.post("/api/usermanagement/signin?k="+r.key,{email:o,password:s}).done(function(t){return i.createCookie("oio_auth",JSON.stringify(t.data),t.data.expires_in||21600),a.resolve(new n(t.data))}).fail(function(t){return a.reject(t)}):(u=o,"function"==typeof u.toJson&&(u=u.toJson()),t.API.post("/api/usermanagement/signin?k="+r.key,u).done(function(t){return i.createCookie("oio_auth",JSON.stringify(t.data),t.data.expires_in||21600),a.resolve(new n(t.data))}).fail(function(t){return a.reject(t)})),a.promise()},confirmResetPassword:function(e,n){return t.API.post("/api/usermanagement/user/password?k="+r.key+"&token="+this.token,{password:e,passwordKey:n})},resetPassword:function(e,n){return t.API.post("/api/usermanagement/password/reset?k="+r.key,{email:e})},refreshIdentity:function(){var o;return o=e.Deferred(),t.API.get("/api/usermanagement/user?k="+r.key+"&token="+i.readCookie("oio_auth")).done(function(t){return o.resolve(new n(t.data))}).fail(function(t){return o.reject(t)}),o.promise()},getIdentity:function(){return new n(JSON.parse(i.readCookie("oio_auth")))},isLogged:function(){var t;return t=i.readCookie("oio_auth"),t?!0:!1}}}},{}],8:[function(t,e,n){!function(){var e,n;return n=t("./tools/jquery-lite.js"),e=t("./lib/core")(window,document,n,navigator),e.extend("OAuth",t("./lib/oauth")),e.extend("API",t("./lib/api")),e.extend("User",t("./lib/user")),"undefined"!=typeof angular&&null!==angular&&angular.module("oauthio",[]).factory("Materia",[function(){return e}]).factory("OAuth",[function(){return e.OAuth}]).factory("User",[function(){return e.User}]),window.Materia=e,window.User=window.Materia.User,window.OAuth=window.Materia.OAuth}()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,e,n){"use strict";e.exports={init:function(t,e){return this.config=e,this.cookies=t},tryCache:function(t,e,n){var r,i,o;if(this.cacheEnabled(n)){if(n=this.cookies.readCookie("oauthio_provider_"+e),!n)return!1;n=decodeURIComponent(n)}if("string"==typeof n)try{n=JSON.parse(n)}catch(s){return r=s,!1}if("object"==typeof n){o={};for(i in n)"request"!==i&&"function"!=typeof n[i]&&(o[i]=n[i]);return t.create(e,o,n.request)}return!1},storeCache:function(t,e){this.cookies.createCookie("oauthio_provider_"+t,encodeURIComponent(JSON.stringify(e)),e.expires_in-10||3600)},cacheEnabled:function(t){return"undefined"==typeof t?this.config.options.cache:t}}},{}],10:[function(t,e,n){"use strict";e.exports={init:function(t,e){return this.config=t,this.document=e},createCookie:function(t,e,n){var r;this.eraseCookie(t),r=new Date,r.setTime(r.getTime()+1e3*(n||1200)),n="; expires="+r.toGMTString(),this.document.cookie=t+"="+e+n+"; path=/"},readCookie:function(t){var e,n,r,i;for(i=t+"=",n=this.document.cookie.split(";"),r=0;r<n.length;){for(e=n[r];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(i))return e.substring(i.length,e.length);r++}return null},eraseCookie:function(t){var e;e=new Date,e.setTime(e.getTime()-864e5),this.document.cookie=t+"=; expires="+e.toGMTString()+"; path=/"}}},{}],11:[function(t,e,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=C.type(t);return"function"===n||C.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t){var e=U[t]={};return C.each(t.match(I)||[],function(t,n){e[n]=!0}),e}function i(){E.removeEventListener("DOMContentLoaded",i,!1),t.removeEventListener("load",i,!1),C.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=C.expando+Math.random()}function s(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(J,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:q.test(n)?C.parseJSON(n):n}catch(i){}data_user.set(t,e,n)}else n=void 0;return n}function a(){return!0}function u(){return!1}function c(){try{return E.activeElement}catch(t){}}function l(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(I)||[];if(C.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function f(t,e,n,r){function i(a){var u;return o[a]=!0,C.each(t[a]||[],function(t,a){var c=a(e,n,r);return"string"!=typeof c||s||o[c]?s?!(u=c):void 0:(e.dataTypes.unshift(c),i(c),!1)}),u}var o={},s=t===st;return i(e.dataTypes[0])||!o["*"]&&i("*")}function p(t,e){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&C.extend(!0,t,r),t}function h(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function d(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=c[u+" "+o]||c["* "+o],!s)for(i in c)if(a=i.split(" "),a[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[i]:c[i]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function v(t,e,n,r){var i;if(C.isArray(e))C.each(e,function(e,i){n||lt.test(t)?r(t,i):v(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==C.type(e))r(t,e);else for(i in e)v(t+"["+i+"]",e[i],n,r)}var y=[],g=y.slice,_=y.concat,m=y.push,b=y.indexOf,j={},w=j.toString,k=j.hasOwnProperty,x={},E=t.document,T="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",C=function(t,e){return new C.fn.init(t,e)},O=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,A=/^-ms-/,R=/-([\da-z])/gi,S=function(t,e){return e.toUpperCase()};C.fn=C.prototype={jquery:T,constructor:C,selector:"",length:0,toArray:function(){return g.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:g.call(this)},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return C.each(this,t,e)},map:function(t){return this.pushStack(C.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:m,sort:y.sort,splice:y.splice},C.extend=C.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||C.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],r=t[e],s!==r&&(c&&r&&(C.isPlainObject(r)||(i=C.isArray(r)))?(i?(i=!1,o=n&&C.isArray(n)?n:[]):o=n&&C.isPlainObject(n)?n:{},s[e]=C.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},C.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===C.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!C.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==C.type(t)||t.nodeType||C.isWindow(t)?!1:t.constructor&&!k.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?j[w.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=C.trim(t),t&&(1===t.indexOf("use strict")?(e=E.createElement("script"),e.text=t,E.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(A,"ms-").replace(R,S)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(O,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?C.merge(r,"string"==typeof t?[t]:t):m.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:b.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,s=t.length,a=!n;s>o;o++)r=!e(t[o],o),r!==a&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return _.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),C.isFunction(t)?(r=g.call(arguments,2),i=function(){return t.apply(e||this,r.concat(g.call(arguments)))},i.guid=t.guid=t.guid||C.guid++,i):void 0},now:Date.now,support:x}),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()});var P,F=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,L=C.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||P).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:E,!0)),F.test(n[1])&&C.isPlainObject(e))for(n in e)C.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=E.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=E,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):C.isFunction(t)?"undefined"!=typeof P.ready?P.ready(t):t(C):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),C.makeArray(t,this))};L.prototype=C.fn,P=C(E);var I=/\S+/g,U={};C.Callbacks=function(t){t="string"==typeof t?U[t]||r(t):C.extend({},t);var e,n,i,o,s,a,u=[],c=!t.once&&[],l=function(r){for(e=t.memory&&r,n=!0,a=o||0,o=0,s=u.length,i=!0;u&&s>a;a++)if(u[a].apply(r[0],r[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,u&&(c?c.length&&l(c.shift()):e?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function r(e){C.each(e,function(e,n){var i=C.type(n);"function"===i?t.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),i?s=u.length:e&&(o=n,l(e))}return this},remove:function(){return u&&C.each(arguments,function(t,e){for(var n;(n=C.inArray(e,u,n))>-1;)u.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?C.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=c=e=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,e||f.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],i?c.push(e):l(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},C.extend({Deferred:function(t){var e=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return C.Deferred(function(n){C.each(e,function(e,o){var s=C.isFunction(t[e])&&t[e];i[o[1]](function(){var t=s&&s.apply(this,arguments);t&&C.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?C.extend(t,r):r}},i={};return r.pipe=r.then,C.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=g.call(arguments),s=o.length,a=1!==s||t&&C.isFunction(t.promise)?s:0,u=1===a?t:C.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?g.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&C.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}});var M;C.fn.ready=function(t){return C.ready.promise().done(t),this},C.extend({isReady:!1,readyWait:1,holdReady:function(t){t?C.readyWait++:C.ready(!0)},ready:function(t){(t===!0?--C.readyWait:C.isReady)||(C.isReady=!0,t!==!0&&--C.readyWait>0||(M.resolveWith(E,[C]),C.fn.triggerHandler&&(C(E).triggerHandler("ready"),C(E).off("ready"))))}}),C.ready.promise=function(e){return M||(M=C.Deferred(),"complete"===E.readyState?setTimeout(C.ready):(E.addEventListener("DOMContentLoaded",i,!1),t.addEventListener("load",i,!1))),M.promise(e)},C.ready.promise();var N=C.access=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===C.type(n)){i=!0;for(a in n)C.access(t,e,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,C.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(C(t),n)})),e))for(;u>a;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o};C.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},o.uid=1,o.accepts=C.acceptData,o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=o.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,C.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(C.isEmptyObject(o))C.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,C.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{C.isArray(e)?r=e.concat(e.map(C.camelCase)):(i=C.camelCase(e),e in s?r=[e,i]:(r=i,r=r in s?[r]:r.match(I)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(t){return!C.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var H=new o,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/([A-Z])/g;C.extend({hasData:function(t){return data_user.hasData(t)||H.hasData(t)},data:function(t,e,n){return data_user.access(t,e,n)},removeData:function(t,e){data_user.remove(t,e)},_data:function(t,e,n){return H.access(t,e,n)},_removeData:function(t,e){H.remove(t,e)}}),C.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=data_user.get(o),1===o.nodeType&&!H.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=C.camelCase(r.slice(5)),s(o,r,i[r])));H.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){data_user.set(this,t)}):N(this,function(e){var n,r=C.camelCase(t);if(o&&void 0===e){if(n=data_user.get(o,t),void 0!==n)return n;if(n=data_user.get(o,r),void 0!==n)return n;if(n=s(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=data_user.get(this,r);data_user.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&data_user.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){data_user.remove(this,t)})}});var V=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,"undefined"),z=/^key/,$=/^(?:mouse|pointer|contextmenu)|click/,W=/^(?:focusinfocus|focusoutblur)$/,B=/^([^.]*)(?:\.(.+)|)$/;C.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,f,p,h,d,v,y=H.get(t);if(y)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=C.guid++),(u=y.events)||(u=y.events={}),(s=y.handle)||(s=y.handle=function(e){return typeof C!==V&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(I)||[""],c=e.length;c--;)a=B.exec(e[c])||[],h=v=a[1],d=(a[2]||"").split(".").sort(),h&&(f=C.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=C.event.special[h]||{},l=C.extend({type:h,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=u[h])||(p=u[h]=[],p.delegateCount=0,f.setup&&f.setup.call(t,r,d,s)!==!1||t.addEventListener&&t.addEventListener(h,s,!1)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),C.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,f,p,h,d,v,y=H.hasData(t)&&H.get(t);if(y&&(u=y.events)){for(e=(e||"").match(I)||[""],c=e.length;c--;)if(a=B.exec(e[c])||[],h=v=a[1],d=(a[2]||"").split(".").sort(),h){for(f=C.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,p=u[h]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)l=p[o],!i&&v!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(t,l));s&&!p.length&&(f.teardown&&f.teardown.call(t,d,y.handle)!==!1||C.removeEvent(t,h,y.handle),delete u[h])}else for(h in u)C.event.remove(t,h+e[c],n,r,!0);C.isEmptyObject(u)&&(delete y.handle,H.remove(t,"events"))}},trigger:function(e,n,r,i){var o,s,a,u,c,l,f,p=[r||E],h=k.call(e,"type")?e.type:e,d=k.call(e,"namespace")?e.namespace.split("."):[];if(s=a=r=r||E,3!==r.nodeType&&8!==r.nodeType&&!W.test(h+C.event.triggered)&&(h.indexOf(".")>=0&&(d=h.split("."),h=d.shift(),d.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[C.expando]?e:new C.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:C.makeArray(n,[e]),f=C.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!C.isWindow(r)){for(u=f.delegateType||h,W.test(u+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)e.type=o>1?u:f.bindType||h,l=(H.get(s,"events")||{})[e.type]&&H.get(s,"handle"),l&&l.apply(s,n),l=c&&s[c],l&&l.apply&&C.acceptData(s)&&(e.result=l.apply(s,n),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!C.acceptData(r)||c&&C.isFunction(r[h])&&!C.isWindow(r)&&(a=r[c],a&&(r[c]=null),C.event.triggered=h,r[h](),C.event.triggered=void 0,a&&(r[c]=a)),e.result}},dispatch:function(t){t=C.event.fix(t);var e,n,r,i,o,s=[],a=g.call(arguments),u=(H.get(this,"events")||{})[t.type]||[],c=C.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=C.event.handlers.call(this,t,u),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;a>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?C(i,this).index(u)>=0:C.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||E,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[C.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=$.test(i)?this.mouseHooks:z.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new C.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=E),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&C.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return C.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=C.extend(new C.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?C.event.trigger(i,null,e):C.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},C.Event=function(t,e){return this instanceof C.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?a:u):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(t,e)},C.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=a,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!C.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),x.focusinBubbles||C.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){C.event.simulate(e,t.target,C.event.fix(t),!0)};C.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=H.access(r,e);i||r.addEventListener(t,n,!0),H.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=H.access(r,e)-1;i?H.access(r,e,i):(r.removeEventListener(t,n,!0),H.remove(r,e))}}}),C.fn.extend({on:function(t,e,n,r,i){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=u;else if(!r)return this;return 1===i&&(o=r,r=function(t){return C().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=C.guid++)),this.each(function(){C.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,C(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=u),this.each(function(){C.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?C.event.trigger(t,e,n,!0):void 0}});var Q=C.now(),X=/\?/;C.parseJSON=function(t){return JSON.parse(t+"")},C.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&C.error("Invalid XML: "+t),e};var K,G,Y=/#.*$/,Z=/([?&])_=[^&]*/,tt=/^(.*?):[ \t]*([^\r\n]*)$/gm,et=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,nt=/^(?:GET|HEAD)$/,rt=/^\/\//,it=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ot={},st={},at="*/".concat("*");try{G=location.href}catch(ut){G=E.createElement("a"),G.href="",G=G.href}K=it.exec(G.toLowerCase())||[],C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:G,type:"GET",isLocal:et.test(K[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":at,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?p(p(t,C.ajaxSettings),e):p(C.ajaxSettings,t)},ajaxPrefilter:l(ot),ajaxTransport:l(st),ajax:function(t,e){function n(t,e,n,s){var u,l,f,b,j,k=e;2!==w&&(w=2,a&&clearTimeout(a),r=void 0,o=s||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(b=h(p,x,n)),b=d(p,b,x,u),u?(p.ifModified&&(j=x.getResponseHeader("Last-Modified"),j&&(C.lastModified[i]=j),j=x.getResponseHeader("etag"),j&&(C.etag[i]=j)),204===t||"HEAD"===p.type?k="nocontent":304===t?k="notmodified":(k=b.state,l=b.data,f=b.error,u=!f)):(f=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(e||k)+"",u?g.resolveWith(v,[l,k,x]):g.rejectWith(v,[x,k,f]),x.statusCode(m),m=void 0,c&&y.trigger(u?"ajaxSuccess":"ajaxError",[x,p,u?l:f]),_.fireWith(v,[x,k]),c&&(y.trigger("ajaxComplete",[x,p]),--C.active||C.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,a,u,c,l,p=C.ajaxSetup({},e),v=p.context||p,y=p.context&&(v.nodeType||v.jquery)?C(v):C.event,g=C.Deferred(),_=C.Callbacks("once memory"),m=p.statusCode||{},b={},j={},w=0,k="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!s)for(s={};e=tt.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=j[n]=j[n]||t,b[t]=e),this},overrideMimeType:function(t){return w||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||k;return r&&r.abort(e),n(0,e),this}};if(g.promise(x).complete=_.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||G)+"").replace(Y,"").replace(rt,K[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=C.trim(p.dataType||"*").toLowerCase().match(I)||[""],null==p.crossDomain&&(u=it.exec(p.url.toLowerCase()),p.crossDomain=!(!u||u[1]===K[1]&&u[2]===K[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(K[3]||("http:"===K[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),f(ot,p,e,x),2===w)return x;c=p.global,c&&0===C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!nt.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(X.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Z.test(i)?i.replace(Z,"$1_="+Q++):i+(X.test(i)?"&":"?")+"_="+Q++)),p.ifModified&&(C.lastModified[i]&&x.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&x.setRequestHeader("If-None-Match",C.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+at+"; q=0.01":""):p.accepts["*"]);for(l in p.headers)x.setRequestHeader(l,p.headers[l]);if(p.beforeSend&&(p.beforeSend.call(v,x,p)===!1||2===w))return x.abort();k="abort";for(l in{success:1,error:1,complete:1})x[l](p[l]);if(r=f(st,p,e,x)){x.readyState=1,c&&y.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},p.timeout));try{w=1,r.send(b,n)}catch(E){if(!(2>w))throw E;n(-1,E)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,e){C[e]=function(t,n,r,i){return C.isFunction(n)&&(i=i||r,r=n,n=void 0),C.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}});var ct=/%20/g,lt=/\[\]$/,ft=/\r?\n/g,pt=/^(?:submit|button|image|reset|file)$/i,ht=/^(?:input|select|textarea|keygen)/i;C.param=function(t,e){var n,r=[],i=function(t,e){e=C.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){i(this.name,this.value)});else for(n in t)v(n,t[n],e,i);return r.join("&").replace(ct,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){
return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&ht.test(this.nodeName)&&!pt.test(t)&&(this.checked||!rcheckableType.test(t))}).map(function(t,e){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(t){return{name:e.name,value:t.replace(ft,"\r\n")}}):{name:e.name,value:n.replace(ft,"\r\n")}}).get()}}),C.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var dt=0,vt={},yt={0:200,1223:204},gt=C.ajaxSettings.xhr();t.ActiveXObject&&C(t).on("unload",function(){for(var t in vt)vt[t]()}),x.cors=!!gt&&"withCredentials"in gt,x.ajax=gt=!!gt,C.ajaxTransport(function(t){var e;return x.cors||gt&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),s=++dt;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete vt[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(yt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=vt[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),C.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=C("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),E.head.appendChild(e[0])},abort:function(){n&&n()}}}});var _t=[],mt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=_t.pop()||C.expando+"_"+Q++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,s,a=e.jsonp!==!1&&(mt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&mt.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(mt,"$1"+i):e.jsonp!==!1&&(e.url+=(X.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||C.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){s=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,_t.push(i)),s&&C.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),C.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||E;var r=F.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=C.buildFragment([t],e,i),i&&i.length&&C(i).remove(),C.merge([],r.childNodes))};var bt=C.fn.load;return C.fn.load=function(t,e,n){if("string"!=typeof t&&bt)return bt.apply(this,arguments);var r,i,o,s=this,a=t.indexOf(" ");return a>=0&&(r=C.trim(t.slice(a)),t=t.slice(0,a)),C.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&C.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?C("<div>").append(C.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},C.noConflict=function(){},C})},{}],12:[function(t,e,n){"use strict";e.exports=function(t){return{reload:function(){return t.location.reload()},getHash:function(){return t.location.hash},setHash:function(e){return t.location.hash=e},changeHref:function(e){return t.location.href=e}}}},{}],13:[function(t,e,n){var r,i;i=0,r="",e.exports={hex_sha1:function(t){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(t)))},b64_sha1:function(t){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(t)))},any_sha1:function(t,e){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(t)),e)},hex_hmac_sha1:function(t,e){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},b64_hmac_sha1:function(t,e){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},any_hmac_sha1:function(t,e,n){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"===thishex_sha1("abc").toLowerCase()},rstr_sha1:function(t){return this.binb2rstr(this.binb_sha1(this.rstr2binb(t),8*t.length))},rstr_hmac_sha1:function(t,e){var n,r,i,o,s;for(n=this.rstr2binb(t),n.length>16&&(n=this.binb_sha1(n,8*t.length)),o=Array(16),s=Array(16),i=0;16>i;)o[i]=909522486^n[i],s[i]=1549556828^n[i],i++;return r=this.binb_sha1(o.concat(this.rstr2binb(e)),512+8*e.length),this.binb2rstr(this.binb_sha1(s.concat(r),672))},rstr2hex:function(t){var e,n,r,o,s;try{}catch(a){e=a,i=0}for(n=i?"0123456789ABCDEF":"0123456789abcdef",o="",s=void 0,r=0;r<t.length;)s=t.charCodeAt(r),o+=n.charAt(s>>>4&15)+n.charAt(15&s),r++;return o},rstr2b64:function(t){var e,n,i,o,s,a,u;try{}catch(c){e=c,r=""}for(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",o=t.length,n=0;o>n;){for(u=t.charCodeAt(n)<<16|(o>n+1?t.charCodeAt(n+1)<<8:0)|(o>n+2?t.charCodeAt(n+2):0),i=0;4>i;)s+=8*n+6*i>8*t.length?r:a.charAt(u>>>6*(3-i)&63),i++;n+=3}return s},rstr2any:function(t,e){var n,r,i,o,s,a,u,c,l;for(r=e.length,c=Array(),o=void 0,a=void 0,l=void 0,u=void 0,n=Array(Math.ceil(t.length/2)),o=0;o<n.length;)n[o]=t.charCodeAt(2*o)<<8|t.charCodeAt(2*o+1),o++;for(;n.length>0;){for(u=Array(),l=0,o=0;o<n.length;)l=(l<<16)+n[o],a=Math.floor(l/r),l-=a*r,(u.length>0||a>0)&&(u[u.length]=a),o++;c[c.length]=l,n=u}for(s="",o=c.length-1;o>=0;)s+=e.charAt(c[o]),o--;for(i=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),o=s.length;i>o;)s=e[0]+s,o++;return s},str2rstr_utf8:function(t){var e,n,r,i;for(n="",e=-1,r=void 0,i=void 0;++e<t.length;)r=t.charCodeAt(e),i=e+1<t.length?t.charCodeAt(e+1):0,r>=55296&&56319>=r&&i>=56320&&57343>=i&&(r=65536+((1023&r)<<10)+(1023&i),e++),127>=r?n+=String.fromCharCode(r):2047>=r?n+=String.fromCharCode(192|r>>>6&31,128|63&r):65535>=r?n+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):2097151>=r&&(n+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return n},str2rstr_utf16le:function(t){var e,n;for(n="",e=0;e<t.length;)n+=String.fromCharCode(255&t.charCodeAt(e),t.charCodeAt(e)>>>8&255),e++;return n},str2rstr_utf16be:function(t){var e,n;for(n="",e=0;e<t.length;)n+=String.fromCharCode(t.charCodeAt(e)>>>8&255,255&t.charCodeAt(e)),e++;return n},rstr2binb:function(t){var e,n;for(n=Array(t.length>>2),e=0;e<n.length;)n[e]=0,e++;for(e=0;e<8*t.length;)n[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32,e+=8;return n},binb2rstr:function(t){var e,n;for(n="",e=0;e<32*t.length;)n+=String.fromCharCode(t[e>>5]>>>24-e%32&255),e+=8;return n},binb_sha1:function(t,e){var n,r,i,o,s,a,u,c,l,f,p,h,d,v;for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,v=Array(80),n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=-1009589776,a=0;a<t.length;){for(c=n,l=r,f=i,p=o,h=s,u=0;80>u;)v[u]=16>u?t[a+u]:this.bit_rol(v[u-3]^v[u-8]^v[u-14]^v[u-16],1),d=this.safe_add(this.safe_add(this.bit_rol(n,5),this.sha1_ft(u,r,i,o)),this.safe_add(this.safe_add(s,v[u]),this.sha1_kt(u))),s=o,o=i,i=this.bit_rol(r,30),r=n,n=d,u++;n=this.safe_add(n,c),r=this.safe_add(r,l),i=this.safe_add(i,f),o=this.safe_add(o,p),s=this.safe_add(s,h),a+=16}return Array(n,r,i,o,s)},sha1_ft:function(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r},sha1_kt:function(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514},safe_add:function(t,e){var n,r;return n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16),r<<16|65535&n},bit_rol:function(t,e){return t<<e|t>>>32-e},create_hash:function(){var t;return t=this.b64_sha1((new Date).getTime()+":"+Math.floor(9999999*Math.random())),t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],14:[function(t,e,n){e.exports=function(t){return{getAbsUrl:function(e){var n;return e.match(/^.{2,5}:\/\//)?e:"/"===e[0]?t.location.protocol+"//"+t.location.host+e:(n=t.location.protocol+"//"+t.location.host+t.location.pathname,"/"!==n[n.length-1]&&"#"!==e[0]?n+"/"+e:n+e)},replaceParam:function(t,e,n){return t=t.replace(/\{\{(.*?)\}\}/g,function(t,n){return e[n]||""}),n&&(t=t.replace(/\{(.*?)\}/g,function(t,e){return n[e]||""})),t}}}},{}],15:[function(t,e,n){var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],16:[function(t,e,n){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof n&&"object"==typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");self.Q=t()}}(function(){"use strict";function e(t){return function(){return X.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===rt(t)||t instanceof $}function i(t,e){if(J&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(it)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+it+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];u(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===z&&r>=W&&ct>=r}function c(){if(J)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=a(n);if(!r)return;return z=r[0],r[1]}}function l(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function f(t){return t instanceof v?t:m(t)?O(t):C(t)}function p(){function t(t){e=t,o.source=t,G(n,function(e,n){f.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=tt(p.prototype),o=tt(v.prototype);if(o.promiseDispatch=function(t,i,o){var s=K(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):f.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=g(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},f.longStackSupport&&J)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(f(n))},i.fulfill=function(n){e||t(C(n))},i.reject=function(n){e||t(T(n))},i.notify=function(t){e||G(r,function(e,n){f.nextTick(function(){n(t)})},void 0)},i}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function d(t){return h(function(e,n){for(var r=0,i=t.length;i>r;r++)f(t[r]).then(e,n)})}function v(t,e,n){void 0===e&&(e=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=tt(v.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(a){s=T(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function y(t,e,n,r){return f(t).then(e,n,r)}function g(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof v}function m(t){return n(t)&&"function"==typeof t.then}function b(t){return _(t)&&"pending"===t.inspect().state}function j(t){return!_(t)||"fulfilled"===t.inspect().state}function w(t){return _(t)&&"rejected"===t.inspect().state}function k(){ot.length=0,st.length=0,ut||(ut=!0)}function x(e,n){ut&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){-1!==Y(st,e)&&(t.emit("unhandledRejection",n,e),at.push(e))}),st.push(e),ot.push(n&&"undefined"!=typeof n.stack?n.stack:"(no stack) "+n))}function E(e){if(ut){var n=Y(st,e);-1!==n&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){var r=Y(at,e);-1!==r&&(t.emit("rejectionHandled",ot[n],e),at.splice(r,1))}),st.splice(n,1),ot.splice(n,1))}}function T(t){var e=v({when:function(e){return e&&E(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(e,t),e}function C(t){return v({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function O(t){var e=p();return f.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function A(t){return v({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return f(t).inspect()})}function R(t,e,n){return f(t).spread(e,n)}function S(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(a){return T(a)}return s.done?f(s.value):y(s.value,i,o)}try{s=n[t](e)}catch(a){return r(a)?f(a.value):T(a)}return y(s,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function P(t){f.done(f.async(t)())}function F(t){throw new $(t)}function D(t){return function(){return R([this,I(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return f(t).dispatch(e,n)}function I(t){return y(t,function(t){var e=0,n=p();return G(t,function(r,i,o){var s;_(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,y(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){if(0===t.length)return f.resolve();var e=f.defer(),n=0;return G(t,function(r,i,o){function s(t){e.resolve(t)}function a(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,y(c,s,a,u)},void 0),e.promise}function M(t){return y(t,function(t){return t=Z(t,f),y(I(Z(t,function(t){return y(t,B,B)})),function(){return t})})}function N(t){return f(t).allSettled()}function H(t,e){return f(t).then(void 0,void 0,e)}function q(t,e){return f(t).nodeify(e)}var J=!1;try{throw new Error}catch(V){J=!!V.stack}var z,$,W=c(),B=function(){},Q=function(){function e(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;u.length;)t=u.pop(),n(t);o=!1}function n(t,n){try{t()}catch(r){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,s=void 0,a=!1,u=[];if(Q=function(e){i=i.next={task:e,domain:a&&t.domain,next:null},o||(o=!0,s())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)a=!0,s=function(){t.nextTick(e)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=l,c.port1.onmessage=e,e()};var l=function(){c.port2.postMessage(0)};s=function(){setTimeout(e,0),l()}}else s=function(){setTimeout(e,0)};return Q.runAfter=function(t){u.push(t),o||(o=!0,s())},Q}(),X=Function.call,K=e(Array.prototype.slice),G=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Y=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=e(Array.prototype.map||function(t,e){var n=this,r=[];return G(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=e(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var n in t)et(t,n)&&e.push(n);return e},rt=e(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var it="From previous event:";f.resolve=f,f.nextTick=Q,f.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?K(arguments,1):n)}},f.Promise=h,f.promise=h,h.race=d,h.all=I,h.reject=T,h.resolve=f,f.passByCopy=function(t){return t},v.prototype.passByCopy=function(){return this},f.join=function(t,e){return f(t).join(e)},v.prototype.join=function(t){return f([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=d,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return T(n)}}function o(t){if("function"==typeof e){i(t,a);try{return e(t)}catch(n){return T(n)}}return T(t)}function s(t){return"function"==typeof n?n(t):t}var a=this,u=p(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(o(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||u.notify(e)}]),u.promise},f.tap=function(t,e){return f(t).tap(e)},v.prototype.tap=function(t){return t=f(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},f.when=y,v.prototype.thenResolve=function(t){return this.then(function(){return t})},f.thenResolve=function(t,e){return f(t).thenResolve(e)},v.prototype.thenReject=function(t){return this.then(function(){throw t})},f.thenReject=function(t,e){return f(t).thenReject(e)},f.nearer=g,f.isPromise=_,f.isPromiseAlike=m,f.isPending=b,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=j,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=w,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],st=[],at=[],ut=!0;f.resetUnhandledRejections=k,f.getUnhandledReasons=function(){return ot.slice()},f.stopUnhandledRejectionTracking=function(){k(),ut=!1},k(),f.reject=T,f.fulfill=C,f.master=A,f.spread=R,v.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},f.async=S,f.spawn=P,f["return"]=F,f.promised=D,f.dispatch=L,v.prototype.dispatch=function(t,e){var n=this,r=p();return f.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},f.get=function(t,e){return f(t).dispatch("get",[e])},v.prototype.get=function(t){return this.dispatch("get",[t])},f.set=function(t,e,n){return f(t).dispatch("set",[e,n])},v.prototype.set=function(t,e){return this.dispatch("set",[t,e])},f.del=f["delete"]=function(t,e){return f(t).dispatch("delete",[e])},v.prototype.del=v.prototype["delete"]=function(t){return this.dispatch("delete",[t])},f.mapply=f.post=function(t,e,n){return f(t).dispatch("post",[e,n])},v.prototype.mapply=v.prototype.post=function(t,e){return this.dispatch("post",[t,e])},f.send=f.mcall=f.invoke=function(t,e){return f(t).dispatch("post",[e,K(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},f.fapply=function(t,e){return f(t).dispatch("apply",[void 0,e])},v.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},f["try"]=f.fcall=function(t){return f(t).dispatch("apply",[void 0,K(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},f.fbind=function(t){var e=f(t),n=K(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(K(arguments))])}},v.prototype.fbind=function(){var t=this,e=K(arguments);return function(){return t.dispatch("apply",[this,e.concat(K(arguments))])}},f.keys=function(t){return f(t).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=I,v.prototype.all=function(){return I(this)},f.any=U,v.prototype.any=function(){return U(this)},f.allResolved=l(M,"allResolved","allSettled"),v.prototype.allResolved=function(){return M(this)},f.allSettled=N,v.prototype.allSettled=function(){return this.then(function(t){return I(Z(t,function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))})},f.fail=f["catch"]=function(t,e){return f(t).then(void 0,e)},v.prototype.fail=v.prototype["catch"]=function(t){return this.then(void 0,t)},f.progress=H,v.prototype.progress=function(t){return this.then(void 0,void 0,t)},f.fin=f["finally"]=function(t,e){return f(t)["finally"](e)},v.prototype.fin=v.prototype["finally"]=function(t){return t=f(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},f.done=function(t,e,n,r){return f(t).done(e,n,r)},v.prototype.done=function(e,n,r){var o=function(t){f.nextTick(function(){if(i(t,s),!f.onerror)throw t;f.onerror(t)})},s=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},f.timeout=function(t,e,n){return f(t).timeout(e,n)},v.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},v.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.promise})},f.nfapply=function(t,e){return f(t).nfapply(e)},v.prototype.nfapply=function(t){var e=p(),n=K(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},f.nfcall=function(t){var e=K(arguments,1);return f(t).nfapply(e)},v.prototype.nfcall=function(){var t=K(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},f.nfbind=f.denodeify=function(t){var e=K(arguments,1);return function(){var n=e.concat(K(arguments)),r=p();return n.push(r.makeNodeResolver()),f(t).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),f.denodeify.apply(void 0,t)},f.nbind=function(t,e){var n=K(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(K(arguments)),o=p();return i.push(o.makeNodeResolver()),f(r).fapply(i).fail(o.reject),o.promise}},v.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),f.nbind.apply(void 0,t)},f.nmapply=f.npost=function(t,e,n){return f(t).npost(e,n)},v.prototype.nmapply=v.prototype.npost=function(t,e){var n=K(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(t,e){var n=K(arguments,2),r=p();return n.push(r.makeNodeResolver()),f(t).dispatch("post",[e,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(t){var e=K(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},f.nodeify=q,v.prototype.nodeify=function(t){return t?void this.then(function(e){f.nextTick(function(){t(null,e)})},function(e){f.nextTick(function(){t(e)})}):this};var ct=c();return f})}).call(this,t("/Users/bumpmann/Desktop/projects/oauth-js-github/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/bumpmann/Desktop/projects/oauth-js-github/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":15}]},{},[8])},{}],7:[function(t,e,n){e.exports=XMLHttpRequest},{}],8:[function(t,e,n){function r(t,e,n,r,i){this.search=function(t){return e.post(n.SEARCH,{query:t})},this.listCollections=function(){return e.get(n.COLLECTIONS).then(function(t){return t.map(o)})},this.serverTime=function(){return e.get(n.SERVER_TIME)},this.collection=function(o){return r.has(o)?r.get(o):r.set(o,new t(o,e,n,i)).get(o)};var o=function(t){return this.collection(t)}.bind(this)}var i=t("./DefinitionBuilder");r.search=i.build().add().name("query").validator("typeOf").type("object").end(),r.collection=i.build().add().name("name").validator("asciiExcept3").end(),e.exports=r},{"./DefinitionBuilder":11}],9:[function(t,e,n){function r(t,e,n,r,i,o,s,a,u,c){this.app=function l(f,p){var h=new e(f,p,new i,o,s,r),l=new n(t,h,r,new i,c);return"undefined"!=typeof window&&(l.oauth=new a(new u(h))),l}}var i=t("./DefinitionBuilder");r.app=i.build().add().name("name").validator("appName").add().name("secret").validator("secret").end(),e.exports=r},{"./DefinitionBuilder":11}],10:[function(t,e,n){function r(t,e,n,r){function i(t){return-1!==t.indexOf("/")?o+t:o+"/"+t}var o="/"+t;this.name=t,this.search=function(t){return e.post(i(n.SEARCH),t)},this.insert=function(t){return this.set(r.uuid4(),t)},this.set=function(t,r){var o=i(t)+n.PROPERTIES;return e.patch(o,r)},this.unset=function(t,r){var o=i(t)+n.PROPERTIES;return e["delete"](o,{properties:r})},this.get=function(t){var r=i(t)+n.PROPERTIES;return e.get(r)},this.getAll=function(t){var r=i(n.DOCUMENTS);return t=t||{},e.get(r,{limit:t.limit,skip:t.skip})},this.on=function(t,r,o){var s=i(t)+n.PROPERTIES;e.on(s,r,o)},this.off=function(t){return e.off(t)},this.onDocuments=function(t,r){var o=i(n.DOCUMENTS);return e.on(o,t,r)},this.onRef=function(t,r,o){var s=i(t)+n.REFERENCES;return e.on(s,r,o)},this.setRef=function(t,r,o,s){var a=i(t)+n.REFERENCES,u={};return u[r]={path:o,priority:s},e.patch(a,u)},this.getRefs=function(t,r){var o=i(t)+n.REFERENCES;return r=r||{},e.get(o,{limit:r.limit,skip:r.skip})},this.unsetRef=function(t,r){var o=i(t)+n.REFERENCES;return e["delete"](o,{references:r})},this["delete"]=function(t){return e["delete"](i(t),{all:!0})}}var i=t("./DefinitionBuilder");r.search=i.build().add().name("query").validator("instanceOf").type(Object).optional().end(),r.insert=i.build().add().name("entry").validator("instanceOf").type(Object).end(),r.set=i.build().add().name("key").validator("documentKey").add().name("entry").validator("instanceOf").type(Object).end(),r.unset=i.build().add().name("key").validator("documentKey").add().name("property").validator("instanceOf").type(Object).end(),r.get=i.build().add().name("key").validator("documentKey").end(),r.getAll=i.build().add().name("filters").validator("instanceOf").type(Object).optional().end(),r.on=i.build().add().name("key").validator("documentKey").add().name("callback").validator("instanceOf").type(Function).end(),r.onDocuments=i.build().add().name("callback").validator("instanceOf").type(Function).end(),r.onRef=i.build().add().name("key").validator("documentKey").add().name("callback").validator("instanceOf").type(Function).end(),r.off=i.build().add().name("key").validator("documentKey").add().name("callback").validator("instanceOf").type(Function).optional().end(),r.getRefs=i.build().add().name("key").validator("documentKey").add().name("filters").validator("instanceOf").type(Object).optional().end(),r.unsetRef=i.build().add().name("key").validator("documentKey").add().name("properties").validator("typeOf").type(["object","string"]).end(),r.setRef=i.build().add().name("key").validator("documentKey").add().name("ref").validator("typeOf").type("string").add().name("path").validator("documentPath").add().name("priority").validator("number").optional().end(),r["delete"]=i.build().add().name("key").validator("documentKey").end(),e.exports=r},{"./DefinitionBuilder":11}],11:[function(t,e,n){function r(){function t(){return e[e.length-1]}var e=[];this.add=function(){return e.push({}),this},this.name=function(e){return t().name=e,this},this.check=function(e){return this.add(),t().name=e,this},this.optional=function(){return t().optional=!0,this},this.defaultValue=function(e){return t().defaultVal=e,this},this.end=function(){return{definitions:e}},this.validator=function(e){return"function"==typeof e?t().custom=e:t().validator=e,this},this.type=function(e){return t().type=e,this},this.prop=function(e,n){return t()[e]=n,this}}r.build=function(){return new r},e.exports=r},{}],12:[function(t,e,n){function r(t,e,n,r,i,o){function s(e){return function(n,s){var c,l,f=new r(function(t,e){c=t,l=e});n=o.ROOT+"/"+t+n;var p={url:n,headers:u()};return"get"===e?p.url="object"==typeof s?a(n,s):n:p.data=s,i[e](p).success(c).error(l),f}}function a(t,e){for(var n in e)void 0!==e[n]&&e.hasOwnProperty(n)&&(t=-1===t.indexOf("?")?t+"?":t,t=t+n+"="+e[n]);return t}function u(){return{"Appbase-Secret":e}}for(var c,l=["get","put","post","patch","delete"],f=0,p=l.length;p>f;f++){var h=l[f];this[h]=s(h)}this.on=function(e,r,s){i.get({url:o.ROOT+"/"+t+e+"?streamonly=true",headers:u(),beforeSend:function(t){var e=n.has(r)?n.get(r):[];e.push(t),n.set(r,e)}}).notify(function(t){var e,n=t.substring(0,t.length-1);try{e=JSON.parse("["+n+"]")}catch(i){return void(s&&s("Invalid JSON object: "+n))}for(var o=0,a=e.length;a>o;o++)r(e[o])}).error(s)},this.off=function(t){var e=n.get(t)||[];e.forEach(function(t){try{t.abort()}catch(e){console.log(e)}}),n.remove(t)},this.setToken=function(t){c=t},this.getApp=function(){return t}}e.exports=r},{}],13:[function(t,e,n){function r(t,e,n){this.config={oauthdURL:"https://auth.appbase.io/",oauthMiddleSever:"https://auth.appbase.io:3000",oauthTokenURL:"/oauth/signin",oauthRefreshURL:"/oauth/refresh"};var r=["oauthio_provider_google","oauthio_provider_linkedin","oauthio_provider_facebook","oauthio_provider_dropbox","oauthio_provider_github"];t.initialize(n.getApp()),t.setOAuthdURL(this.config.oauthdURL),this.completeAuth=function(t,e){return function(r,i){if(r)return this.unauth(),void e(r);var o=this.restoreCreds();o&&Date.now()/1e3<o.credentials.appbase.expires_in+o.credentials.appbase.generated_at?(n.setToken(o.credentials.appbase.access_token),e(null,o,this.credsToRequetObj(o))):(this.saveCreds(null),this.codeToCreds(t,i.code,function(t,r){r.credentials.appbase.generated_at=Date.now()/1e3-2,r.credentials.provider.generated_at=r.credentials.appbase.generated_at,this.saveCreds(r),n.setToken(r.credentials.appbase.access_token),e(null,r,this.credsToRequetObj(r))}))}.bind(this)},this.codeToCreds=function(t,r,i){function o(t){this.unauth(),i(t)}var s={app:n.getApp(),code:r,provider:t};e.post(this.config.oauthMiddleSever+this.config.oauthTokenURL,s).success(i.bind(null,null)).error(o.bind(this));

},this.credsToRequetObj=function(e){return t.create(e.credentials.provider.provider,e.credentials.provider)},this.saveCreds=function(t){localStorage.setItem("appbase_credentials",JSON.stringify(t))},this.restoreCreds=function(){try{return JSON.parse(localStorage.getItem("appbase_credentials"))}catch(t){return null}},this.unauth=function(){this.saveCreds(null),n.setToken(null);var t=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};r.forEach(t)}}e.exports=r},{}],14:[function(t,e,n){if("undefined"!=typeof window){var r,i=void 0!==window.OAuth;if(i){var o=window.OAuth;delete window.OAuth,t("oauth-js"),r=window.OAuth,window.OAuth=o}else t("oauth-js"),r=window.OAuth,delete window.OAuth;e.exports=r}},{"oauth-js":6}],15:[function(t,e,n){function r(t,e){this.getAuth=function(){var t=e.restoreCreds();return t?(ab.server.setAppbaseToken(t.credentials.appbase.access_token),{authObj:t,requestObj:e.credsToRequetObj(t)}):null},this.callback=function(n,r){t.callback(n,e.completeAuth(n,r))},this.auth=function(n,r,i){r.cache=!0,r.authorize||(r.authorize={}),r.authorize.response_type="code";var o;if("function"==(o=typeof i))t.popup(n,r,e.completeAuth(n,i));else{if("string"!==o)throw"Invalid argument:"+i.toString();t.redirect(n,r,i)}},this.authPopup=function(t,e,n){this.auth(t,e,n)},this.authRedirect=function(t,e,n){this.auth(t,e,n)},this.unauth=function(){e.unauth()}}var i=t("./DefinitionBuilder"),o=["google","linkedin","facebook","dropbox","github"];r.callback=i.build().check("provider").validator("inArray").prop("array",o).check("callback").validator("instanceOf").type(Function).end(),r.auth=i.build().check("provider").validator("inArray").prop("array",o).check("options").validator("typeOf").type("object").check("callback").validator("typeOf").type(["function","string"]).end(),r.authPopup=i.build().check("provider").validator("inArray").prop("array",o).check("options").validator("typeOf").type("object").check("callback").validator("typeOf").type(["function","string"]).end(),r.authRedirect=i.build().check("provider").validator("inArray").prop("array",o).check("options").validator("typeOf").type("object").check("redirectURL").validator("typeOf").type("string").end(),e.exports=r},{"./DefinitionBuilder":11}],16:[function(t,e,n){var r={};r.ROOT="https://v3.api.appbase.io",r.SEARCH="/~search",r.COLLECTIONS="/~collections",r.SERVER_TIME="/~timestamp",r.PROPERTIES="/~properties",r.REFERENCES="/~references",r.DOCUMENTS="/~documents",r.get=function(t){return UR.ROOT+t},e.exports=r},{}],17:[function(t,e,n){function r(){}r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.getIndexesOf=function(t,e){for(var n=[],r=t.length-1;r>=0;r--)t[r]===e&&n.push(r);return n},r.cutLeadingTrailingSlashes=function(t){for(;"/"===t.charAt(t.length-1);)t=t.slice(0,-1);for(;"/"===t.charAt(0);)t=t.slice(1);return t},e.exports=r},{}],18:[function(t,e,n){function r(t){function e(e){return e.validator?t[e.validator]:e.custom}function n(t,e){throw new Error("Not enough parameters. You should provide: "+r(t))}function r(t){return t.map(function(t){return t.name+(t.optional?"(optional)":"(required)")}).join(", ")}function o(t,e,n){if(t.length){var i=e.length?Array.prototype.slice.call(e).join('", "'):"None",o='Invalid arguments provided: "'+i+'". Valid Arguments are: '+r(n);throw new Error(o+". Errors: "+t.join(", "))}}this.decorate=function(t,r,s){return function(){for(var a=new Array(arguments.length),u=0,c=arguments.length;c>u;u++)a[u]=arguments[u];for(var l=[],f=s.length,p=0,u=0;f>u;u++)f!==a.length&&s[u].optional&&a.splice(u,0,i(s[u].defaultVal)),p=s[u].optional?p:p+1;for(var u=0;f>u;u++){var h=s[u],d=e(h).validate(a[u],h);!h.optional&&d?l.push(d):null}return arguments.length<p?n(s,arguments):o(l,arguments,s),t.apply(r,a)}},this.decorateAll=function(t){var e=this;return function(){t.apply(this,arguments);for(var n in t){var r=t[n];Object.hasOwnProperty.call(this,n)&&"function"==typeof this[n]&&r.definitions&&(this[n]=e.decorate(this[n],this,r.definitions))}}},this.addvalidator=function(e,n){t[e]=n}}function i(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;r>n;n++)e[n]=i(t[n]);return e}if(t instanceof Object){e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=i(t[o]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}e.exports=r},{}],19:[function(t,e,n){e.exports={uuid4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}}},{}],20:[function(t,e,n){function r(t){return t.name+(t.optional?" (optional) ":" (required) ")}var i={},o=t("./Utils");i.alphaNumUnder={validate:function(t,e){var n=new RegExp("^[a-zA-Z0-9_]*$");return"string"==typeof t&&""!==t&&n.test(t)?void 0:r(e)+" should be an alphanumeric string with underscores"}},i.asciiExcept3={validate:function(t,e){var n=new RegExp("^([\x00-.]|[0-9]|[;-}]|[-ÿ])*$");return"string"==typeof t&&""!==t&&n.test(t)?void 0:r(e)+" should be an ascii string except '/', '~' and ':' characters"}},i.appName={validate:function(t,e){var n=new RegExp("^[a-z0-9_]*$");return"string"==typeof t&&""!==t&&n.test(t)?void 0:r(e)+" application name should be a lower case alphanumeric string with underscores"}},i.secret={validate:function(t,e){var n=new RegExp("^[a-zA-Z0-9]*$");return"string"==typeof t&&""!==t&&n.test(t)?void 0:r(e)+" application secret should be an alphanumeric string"}},i.instanceOf={validate:function(t,e){return t instanceof e.type?void 0:r(e)+" should be a instance of "+e.type}},i.typeOf={validate:function(t,e){for(var n="string"==typeof e.type?[e.type]:e.type,i=!1,o=n.length-1;o>=0;o--)typeof t===n[o]&&(i=!0);return i?void 0:r(e)+" should have the types "+n.join(" or ")}},i.documentPath={validate:function(t,e){t=o.cutLeadingTrailingSlashes(t);var n=new RegExp("^([\x00-9]|[;-}]|[-ÿ])*$");return"string"==typeof t&&""!==t&&n.test(t)?void 0:" a vertex path - an ascii string except '~' and ':' characters"}},i.documentKey={validate:function(t,e){t="string"==typeof t&&""!==t?o.cutLeadingTrailingSlashes(t):"";var n=i.asciiExcept3.validate(t,e);return n?n:void 0}},i.number={validate:function(t,e){return isNaN(t)?r(e)+" should be a number":void 0}},i.number={validate:function(t,e){return isNaN(t)?r(e)+" should be a number":void 0}},i.inArray={validate:function(t,e){return-1===e.array.indexOf(t)?r(e)+" should be either: "+e.array.join(", "):void 0}},e.exports=i},{"./Utils":17}]},{},[1]);